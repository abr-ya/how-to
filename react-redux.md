# Как быстро добавить Ридакс в Реакт проект (+ DevTools)
Задача добавить Ридакс в проект на Реакте возникает регулярно. Через какое-то время я решил подготовить "набор команд" и "стартовые файлы" в одном месте. Итак, для подключения:

## 1 Устанавливаем нужные пакеты
```
npm i react-redux redux redux-promise
```
последний - опционально - он позволяет удобнее работать с асинхронными запросами в Ридакс, но не нужен, если вы используете Саги или другой подход.

и пакет девтулсов:
```
npm i redux-devtools-extension --save-dev
```

## 2 Копируем файлы стартера
Сейчас в корне репозитория есть папка redux-starter. Я копирую её в src своего проекта и переименовываю в redux. Это вариант, в котором редюсеры, экшены и провайдер собраны в одной папке. Ещё и демо тут. Конечно, если проект большой, модульная структура, экшены и редюсеры будут в папках модулей... Но тогда и этот стартер вряд ли пригодится.)

## 3 Подключаем провайдер в главном файле проекта
Как-то так (фрагмент файла):
```javascript
import ReduxProvider from './redux/ReduxProvider';
import App from './components/App/App';
import './index.scss';

const initialState = {
  comments: ['Комментарий #1 (from index)', 'Комментарий #2 (from index)'],
};

ReactDOM.render(
  <ReduxProvider initialState={initialState}>
    <SnackbarProvider>
      <App />
    </SnackbarProvider>
  </ReduxProvider>,
  document.getElementById('root'),
);
```

привёл часть кода файла main.js (сборка на Vite), также это может быть index.js (CRA, например).
Если коротко, то мы:
- импортируем провайдер из стартового пакета,
- создаём небольшой "демо-стейт",
- оборачиваем наше приложение в провайдер.

А вот тут на скриншоте видно, в каких строках изменения:
![](./img/redux/2021-08-15_110306_add_redux.png)

## 4 (если до этого ни разу) Устанавливаем расширение Chrome
[отсюда](https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd)

Уже после этого мы после старта видим, что redux в проекте работает - initialState, который мы прописали, можно увидеть в DevTools (для просмотра всего стейта не забываем переключиться на вкладку State):
![](./img/redux/2021-08-15_112105_state.png)

## 5 (быстрый тест)
В папке стартера есть папка demo.
Можно сразу удалить, а можно проверить, что всё работает.
Для этого в приложении, там где роутер, импортируем компонент из демо, например:
```javascript
import ReduxDemo from '../../redux/demo/ReduxDemo';
```

и добавим его в Switch роутера:
```javascript
                <Route path="/redux" component={ReduxDemo} />
```

Всё! У нас в приложении есть страница, на которой работает Redux. Дизайн, конечно, хромает на обе ноги, но... это работает! И, да, в демке спициально нет стилей. Совсем. Зато добавим комментарий мы можем тут же увидеть не только как он появился на странице, но и его влияние на стейт Ридакса в Девтулсах:
![](./img/redux/2021-08-15_122719_redux_demo.png)


Кнопка "загрузить комментарии" вызывает запрос на сайт [jsonplaceholder](http://jsonplaceholder.typicode.com/) c помощью axios, поэтому если он не установлен, необходимо сделать это:
```
npm i axios
```

Запрос выполняется в экшене, возвращает Promise, но результат корректно обрабатывается благодаря использованию пакета redux-promise (ставили на первом шаге).

## Замечания, предложения, дополнения
Конечно, это очень поверхностно. Поэтому если что-то пошло не так, что-то не работает или есть предложение что-то улучшить - пишите! Быстрее всего читаю телегу (abr_ya). 
